var structureJS="undefined"!=typeof structureJS?structureJS:{config:{structureJS_base:"structureJS/",module_base:"Modules/",global_base:"lib/",globals:[],commons:[]},uglifyMode:!1,compressedMode:!1,_needTree:{},_files:[],_exportOrder:[],_modules:{},UGLYFY_FILENAME:"uglifyjs.min",COMPRESSION_FILENAME:"structureJSCompress",resolveFilePath:function(e){function t(e,t){var o=n.directory_aliases,i=t+e+".js";if("undefined"==typeof o)return i;var r=null,u=null;for(var l in o)u=new RegExp("^"+l+"/","i"),r=u.exec(e),null!=r&&(i=e.replace(r[0],o[l])+".js");return i}var n=this.config,o="";return"undefined"!=typeof e&&"object"==typeof e?o=t(Object.keys(e)[0],n.module_base):e==this.UGLYFY_FILENAME||e==this.COMPRESSION_FILENAME?o=t(e,n.structureJS_base):"string"==typeof e&&(o=t(e,n.global_base)),o},loadScript:function(e,t){console.log("Loading: "+e);var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=e,n.appendChild(o),o.onload=t},loadModules:function(){for(var e=this,t=e.config.globals||[],n=e.config.commons||[],o=n.length-1;o>=0;o--){var i={};i[n[o]]=null,e._files.unshift(i)}1==e.uglifyMode&&t.unshift("uglifyjs.min"),e._files=t.concat(e._files);for(var o=0;o<e._files.length;o++)e._exportOrder.push(e.resolveFilePath(e._files[o]));var r=function(){var t=e.resolveFilePath(e._files.shift());t?e.loadScript(t,r):1==e.uglifyMode?e.loadScript(e.resolveFilePath("structureJSCompress"),function(){console.log("Modules Done Loading. Enjoy structureJS!")}):console.log("Modules Done Loading. Enjoy structureJS!")};e.loadScript(this.resolveFilePath(e._files.shift()),r)},detectCircularDependency:function(e){var t="",n="",o="";for(var t in e){console.log("Checking "+t+"s dependencies");for(var i=0;i<e[t].length;i++){if(n=e[t][i],console.log("Dependency "+i+" of "+t+" is "+n),"undefined"==typeof e[n])throw"ERROR: "+n+" is a dependency of "+t+" but has not been explicitly declared.";for(var r=0;r<e[n].length;r++)if(o=e[n][r],console.log("Checking "+n+"s dependencies for circular reference to parent "+t),t==o)throw"ERROR: CIRCULAR DEPENDENCY: "+t+" is a dependency of its own dependency "+n}}return!1},orderImports:function(e){function t(e){return Object.keys(e)[0]}function n(e){for(var n=e||"",o=0;o<l.length;o++)n+=t(l[o])+",";console.log(n)}function o(t){return e[t]}function i(e){for(var n=0;n<l.length;n++)if(e===t(l[n]))return n}function r(e){for(var n=0;n<l.length;n++)if(e===t(l[n]))return l[n]}function u(e,n){var o=i(t(e)),u=(r(t(l[n])),t(l[n]));console.log("Moving "+t(e)+"("+o+") in front of "+u+"("+n+")");for(var s=[],f=0;f<l.length;f++)n>f?s.push(l[f]):f==n?s.push(e):f>n&&s.push(l[f-1]);l=s}var l=[];for(var s in e){var f={};f[s]=e[s],l.push(f)}n("Starting Order: ",l);for(var d=0,c="",a=null,g="",h=0;h<l.length;h++){c=t(l[h]),d=i(c),a=o(c),console.log("Resolving: "+c+" Index: "+h);for(var s=0;s<a.length;s++)g=a[s],c!==g&&i(g)>d&&u(r(g),i(c))}return l},declare:function(e,t){"undefined"==typeof t&&(t=[]),this._needTree[e]=t},resolveDependencies:function(){function e(e,t){function n(e){return Object.keys(e)[0]}for(var o=e||"",i=0;i<t.length;i++)o+=n(t[i])+",";console.log(o)}this.detectCircularDependency(this._needTree),this._files=this.orderImports(this._needTree,this._files),e("Resolved Order: ",this._files),this.loadModules(this.config)},module:function(e,t){function n(e){return o._modules[e].module}if("undefined"==typeof e||"function"==typeof e)throw"Module Must Have Configuration Object Or Name String";if("function"!=typeof t)throw"Module Must Have A Function As It's Definition";var o=this,i=null,r={type:"unknown"};if("string"==typeof e)i=e;else if("object"==typeof e){if("undefined"==typeof e.name)throw"Module Configuration Object Must Have Name Property";i=e.name,"undefined"!=typeof e.type&&(r.type=e.type)}if(n.amd=n,n._class=n,structureJS.require=n,n.getType=function(e){return o._modules[e].type},r.module=t.call(null,n),"undefined"==typeof r.module)throw i+" FAILED: Module Function Definition Must Return Something";this._modules[i]=r},moduleAMD:function(e,t){var n={type:"amd",name:e};if(n.module=t.call(null).call(null),"undefined"==typeof n.module)throw"Module Function Definition Must Return Something";console.log("AMD: Loading "+e),this._modules[e]=n},loadConfigAndManifest:function(e){var t=document.getElementById("structureJS");if("undefined"==typeof t||null===t)throw'ERROR: No script tag with ID of "structureJS" which is required';var n=t.getAttribute("data-config"),o=t.getAttribute("data-manifest"),i=t.getAttribute("data-uglify"),r=this.config.structureJS_base;if("undefined"==typeof o||""===o||null===o)throw"ERROR: No manifest declared";"undefined"!=typeof i&&null===i||1!=/true/i.test(i)||(this.uglifyMode=!0);var u=this,l=function(){null!=o?(console.log("Loading Manifest: "+r+o),u.loadScript(r+o+".js",l),o=null):(console.log("Done Loading Manifest And/Or Config Files."),e.call(u))};n?(console.log("Loading Config: "+r+n),this.loadScript(r+n+".js",l)):this.loadScript(r+o+".js",function(){e.call(u)})}};!function(e){e.define=function(t,n,o){e.structureJS.moduleAMD(t,o)},e.define.amd={jQuery:!0},e.console||(e.console={log:function(){}});var t=document.getElementById("structureJS");if("undefined"==typeof t||null===t)throw'ERROR: No script tag with ID of "structureJS" which is required';var n=t.getAttribute("data-is-combined");"undefined"!=typeof n&&null!==n&&1==/true/i.test(n)||structureJS.loadConfigAndManifest(structureJS.resolveDependencies)}(window);structureJS.module("C",function(){return console.log("Hello From C"),{blasted:"whoooooaaaa"}});structureJS.module("D",function(e){var t=e("C");return console.log(t),{}});